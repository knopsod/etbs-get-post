extend ../layout2

block content
  ul
    li
      a(href='/etbs-roles') Roles
    li
      a(href='/etbs-permissions') Permissions
    li
      a(href='/etbs-users') Users
  h1 Users
  p Welcome to Users page
  a(href='/etbs-users/add') New
  form(method='GET' action='/etbs-users/get')
    input#filter(type='text' placeholder='Username...' name='filter' value=filter)
    input#sort(type='checkbox' name='sort' value='1' checked=sort ? true : false)
  ul
    each user in users
      li='username: ' + user.username
        =', clientid: ' + user.clientid
        =', rolename: ' + user.rolename
        =', extension: ' + user.extension
        =', name: ' + user.name
        =', logo: ' + user.logo
        =', company: ' + user.company
        =', email: ' + user.email
        =', mobile: ' + user.mobile
        =', fax: ' + user.fax
        =', is_active: ' + user.is_active
        a(href='/etbs-users/edit/' + user.username) Edit
        = '-'
        a(href='/etbs-users/remove/' + user.username) Remove
  // http://programmerblog.net/nodejs-mysql-pagination-example-beginners/
  // https://github.com/knopsod/paginationapp
  if pageCount > 1
       ul.pagination
        if currentPage > 1
         li
          a(href='/etbs-users/?page=1')  &laquo;
        - var x = 1
        if currentPage > 5
         - x = x + (currentPage - 4)
        if (x !== 1)
           li.disabled
              a(href='#') ...
        - for (x; x <= pageCount; x++)
           if( currentPage == x)
            li.active
               span.sr_only
                   = currentPage
           else
             li
               a(href= "/etbs-users/?page="+x )
                = x
           if x == (currentPage + 4)
               li.disabled
                a(href="#") ...
                - break
        if currentPage != pageCount
        li
            a(href= "/etbs-users/?page=#{Math.floor(pageCount)}" ) &raquo;
  script(src='https://code.jquery.com/jquery-3.1.1.min.js')
  script.
  
  